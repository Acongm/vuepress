"use strict";(self.webpackChunkmd_vuepress=self.webpackChunkmd_vuepress||[]).push([[6229],{1369:(t,e,l)=>{l.r(e),l.d(e,{data:()=>r});const r={key:"v-7903f9d3",path:"/webpack/webpack-vite-rollup.html",title:"Webpack、Vite、Rollup",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"关联面试卡（快速跳转）",slug:"关联面试卡-快速跳转",children:[]},{level:2,title:"一、整体定位对比",slug:"一、整体定位对比",children:[]},{level:2,title:"二、架构与核心原理详解",slug:"二、架构与核心原理详解",children:[{level:3,title:"1. Webpack",slug:"_1-webpack",children:[]},{level:3,title:"2. Rollup",slug:"_2-rollup",children:[]},{level:3,title:"3. Vite",slug:"_3-vite",children:[]}]},{level:2,title:"三、详细对比表",slug:"三、详细对比表",children:[]},{level:2,title:"四、各自最擅长的场景",slug:"四、各自最擅长的场景",children:[{level:3,title:"✅ Webpack：适合 大型企业级应用",slug:"✅-webpack-适合-大型企业级应用",children:[]},{level:3,title:"✅ Rollup：JavaScript 库 / 组件库 首选",slug:"✅-rollup-javascript-库-组件库-首选",children:[]},{level:3,title:"✅ Vite：现代 Web 应用开发的首选",slug:"✅-vite-现代-web-应用开发的首选",children:[]}]},{level:2,title:"五、如何选择？—— 决策树",slug:"五、如何选择-——-决策树",children:[]},{level:2,title:"六、总结",slug:"六、总结",children:[]},{level:2,title:"附加建议（针对你的项目）",slug:"附加建议-针对你的项目",children:[]}],git:{updatedTime:1770268685e3},filePathRelative:"webpack/webpack-vite-rollup.md"}},4128:(t,e,l)=>{l.r(e),l.d(e,{default:()=>R});var r=l(6252);const a=(0,r._)("h1",{id:"webpack、vite、rollup",tabindex:"-1"},[(0,r._)("a",{class:"header-anchor",href:"#webpack、vite、rollup","aria-hidden":"true"},"#"),(0,r.Uk)(" Webpack、Vite、Rollup")],-1),n=(0,r._)("h2",{id:"关联面试卡-快速跳转",tabindex:"-1"},[(0,r._)("a",{class:"header-anchor",href:"#关联面试卡-快速跳转","aria-hidden":"true"},"#"),(0,r.Uk)(" 关联面试卡（快速跳转）")],-1),i=(0,r.Uk)("构建工具选型矩阵："),d=(0,r._)("code",null,"matrix__bundler-webpack-vite-rollup",-1),s=(0,r.Uk)("技术卡： "),o=(0,r._)("code",null,"tech__webpack",-1),h=(0,r._)("code",null,"tech__vite",-1),u=(0,r._)("code",null,"tech__rollup",-1),c=(0,r.uE)('<p>当然可以。作为一位熟悉 Webpack、React、Ant Design、Rollup 和现代前端工程化的开发者，你正处于一个需要为不同项目选择合适构建工具的关键节点。以下是对 <strong>Webpack、Vite、Rollup</strong> 三者的<strong>架构原理深度分析、优缺点对比</strong>以及<strong>各自最适合的应用场景</strong>的系统性总结。</p><hr><h2 id="一、整体定位对比" tabindex="-1"><a class="header-anchor" href="#一、整体定位对比" aria-hidden="true">#</a> 一、整体定位对比</h2><table><thead><tr><th>工具</th><th>定位</th><th>核心目标</th></tr></thead><tbody><tr><td>Webpack</td><td><strong>通用模块打包器</strong></td><td>打包一切资源，支持复杂定制</td></tr><tr><td>Rollup</td><td><strong>专注于 JavaScript 的打包器</strong></td><td>输出更小、更干净的库代码</td></tr><tr><td>Vite</td><td><strong>下一代前端开发与构建工具</strong></td><td>提供极致开发体验 + 生产优化</td></tr></tbody></table><blockquote><p>✅ 简单理解：</p><ul><li><strong>Webpack</strong>：全能但重；</li><li><strong>Rollup</strong>：轻量但专注（适合库）；</li><li><strong>Vite</strong>：开发快 + 构建稳（适合现代应用）。</li></ul></blockquote><hr><h2 id="二、架构与核心原理详解" tabindex="-1"><a class="header-anchor" href="#二、架构与核心原理详解" aria-hidden="true">#</a> 二、架构与核心原理详解</h2><h3 id="_1-webpack" tabindex="-1"><a class="header-anchor" href="#_1-webpack" aria-hidden="true">#</a> 1. Webpack</h3><h4 id="架构" tabindex="-1"><a class="header-anchor" href="#架构" aria-hidden="true">#</a> 架构</h4><ul><li><strong>核心</strong>：基于依赖图（Dependency Graph）的静态分析打包器。</li><li><strong>模块系统</strong>：自定义模块系统（支持 CommonJS、AMD、ESM 等，但需转换为内部格式）。</li><li><strong>构建流程</strong>： <ol><li>从入口文件开始，递归解析 <code>import/require</code>；</li><li>构建完整的依赖图；</li><li>应用 Loaders（转换资源） + Plugins（扩展功能）；</li><li>生成 bundle（chunks）。</li></ol></li></ul><h4 id="特性" tabindex="-1"><a class="header-anchor" href="#特性" aria-hidden="true">#</a> 特性</h4><ul><li><strong>Code Splitting</strong>（通过 <code>splitChunks</code>）</li><li><strong>HMR（Hot Module Replacement）</strong></li><li><strong>Tree Shaking</strong>（仅对 ESM 有效）</li><li><strong>Asset Management</strong>（图片、字体、CSS 等）</li></ul><h4 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点" aria-hidden="true">#</a> 缺点</h4><ul><li>启动慢（需构建整个依赖图）；</li><li>配置复杂（loader/plugin 分离，概念多）；</li><li>HMR 更新慢（需重建 chunk）；</li><li>输出代码有运行时（<strong>webpack_require</strong>）。</li></ul><hr><h3 id="_2-rollup" tabindex="-1"><a class="header-anchor" href="#_2-rollup" aria-hidden="true">#</a> 2. Rollup</h3><h4 id="架构-1" tabindex="-1"><a class="header-anchor" href="#架构-1" aria-hidden="true">#</a> 架构</h4><ul><li><strong>核心</strong>：基于 <strong>ESM</strong> 的打包器，<strong>只处理 JavaScript</strong>（或可编译为 JS 的语言）。</li><li><strong>构建流程</strong>： <ol><li>构建 ESM 依赖图；</li><li>执行 Tree Shaking（死代码消除）；</li><li>输出为 IIFE、UMD、ESM、CJS 等格式。</li></ol></li></ul><h4 id="特性-1" tabindex="-1"><a class="header-anchor" href="#特性-1" aria-hidden="true">#</a> 特性</h4><ul><li><strong>Pure ESM First</strong>：原生支持 ESM，Tree Shaking 更彻底；</li><li><strong>无运行时</strong>：输出代码干净，无额外包装；</li><li><strong>插件系统简洁</strong>：基于钩子（hooks）的统一接口；</li><li><strong>适合库开发</strong>：如 React、Vue、Lodash、D3 等均用 Rollup 构建。</li></ul><h4 id="缺点-1" tabindex="-1"><a class="header-anchor" href="#缺点-1" aria-hidden="true">#</a> 缺点</h4><ul><li><strong>不处理非 JS 资源</strong>（如 CSS、图片需插件）；</li><li><strong>不支持 HMR</strong>（开发体验弱）；</li><li><strong>不适合复杂应用</strong>（缺乏代码分割、懒加载等高级功能）。</li></ul><blockquote><p>📌 注意：Rollup 本身<strong>不是开发服务器</strong>，只用于构建。</p></blockquote><hr><h3 id="_3-vite" tabindex="-1"><a class="header-anchor" href="#_3-vite" aria-hidden="true">#</a> 3. Vite</h3><h4 id="架构-双模式" tabindex="-1"><a class="header-anchor" href="#架构-双模式" aria-hidden="true">#</a> 架构（双模式）</h4><table><thead><tr><th>模式</th><th>技术栈</th><th>职责</th></tr></thead><tbody><tr><td><strong>开发模式</strong></td><td>Koa + ESM + esbuild</td><td>按需编译、HMR、依赖预构建</td></tr><tr><td><strong>生产模式</strong></td><td>Rollup</td><td>打包、优化、输出</td></tr></tbody></table><h4 id="核心原理" tabindex="-1"><a class="header-anchor" href="#核心原理" aria-hidden="true">#</a> 核心原理</h4><ul><li><strong>开发阶段</strong>： <ul><li>利用浏览器原生 ESM，<strong>不打包源码</strong>；</li><li>使用 <strong>esbuild</strong> 预构建依赖（快 10–100 倍）；</li><li>实现毫秒级启动和 HMR。</li></ul></li><li><strong>生产阶段</strong>： <ul><li>基于 Rollup 构建，继承其 Tree Shaking 和格式输出能力；</li><li>支持代码分割、压缩、资源哈希等。</li></ul></li></ul><h4 id="插件系统" tabindex="-1"><a class="header-anchor" href="#插件系统" aria-hidden="true">#</a> 插件系统</h4><ul><li>兼容 <strong>Rollup 插件</strong>（大部分可直接用）；</li><li>扩展 Dev Server 钩子（如 <code>configureServer</code>）。</li></ul><h4 id="优势" tabindex="-1"><a class="header-anchor" href="#优势" aria-hidden="true">#</a> 优势</h4><ul><li>开发体验极佳（启动快、HMR 快）；</li><li>配置简洁（零配置即可开发 React/AntD/TS）；</li><li>现代浏览器优先。</li></ul><h4 id="缺点-2" tabindex="-1"><a class="header-anchor" href="#缺点-2" aria-hidden="true">#</a> 缺点</h4><ul><li>不支持 IE11；</li><li>对非 ESM 依赖需预构建（偶有兼容问题）；</li><li>插件生态虽增长快，但不如 Webpack 成熟。</li></ul><hr><h2 id="三、详细对比表" tabindex="-1"><a class="header-anchor" href="#三、详细对比表" aria-hidden="true">#</a> 三、详细对比表</h2><table><thead><tr><th>维度</th><th>Webpack</th><th>Rollup</th><th>Vite</th></tr></thead><tbody><tr><td><strong>核心目标</strong></td><td>应用打包</td><td>库打包</td><td>现代应用开发 + 构建</td></tr><tr><td><strong>模块系统</strong></td><td>自定义（支持 CJS/AMD/ESM）</td><td>原生 ESM（仅 ESM）</td><td>开发：原生 ESM；生产：Rollup ESM</td></tr><tr><td><strong>启动速度</strong></td><td>慢（全量构建）</td><td>不适用（无 Dev Server）</td><td>极快（按需加载）</td></tr><tr><td><strong>HMR</strong></td><td>支持，但较慢</td><td>❌ 不支持</td><td>支持，极快（模块级）</td></tr><tr><td><strong>Tree Shaking</strong></td><td>支持（仅 ESM）</td><td><strong>极佳</strong>（原生 ESM + 无运行时）</td><td>同 Rollup（生产阶段）</td></tr><tr><td><strong>输出运行时</strong></td><td>有（<strong>webpack_require</strong>）</td><td><strong>无</strong></td><td>生产无（Rollup 输出）</td></tr><tr><td><strong>非 JS 资源处理</strong></td><td>内置（loader）</td><td>需插件</td><td>内置（开箱即用）</td></tr><tr><td><strong>配置复杂度</strong></td><td>高（概念多：entry/output/loaders/plugins）</td><td>中（插件钩子清晰）</td><td>低（零配置起步）</td></tr><tr><td><strong>插件生态</strong></td><td><strong>最成熟</strong></td><td>丰富（侧重 JS）</td><td>快速增长（兼容 Rollup）</td></tr><tr><td><strong>适用项目类型</strong></td><td>大型复杂应用、需深度定制</td><td><strong>JavaScript 库/组件库</strong></td><td>现代 Web 应用（React/Vue/Svelte）</td></tr><tr><td><strong>浏览器兼容性</strong></td><td>支持 IE11+</td><td>无限制（由输出格式决定）</td><td><strong>仅现代浏览器（ESM）</strong></td></tr><tr><td><strong>生产构建性能</strong></td><td>中等</td><td>快（但无高级优化）</td><td>快（Rollup + esbuild 压缩）</td></tr></tbody></table><hr><h2 id="四、各自最擅长的场景" tabindex="-1"><a class="header-anchor" href="#四、各自最擅长的场景" aria-hidden="true">#</a> 四、各自最擅长的场景</h2><h3 id="✅-webpack-适合-大型企业级应用" tabindex="-1"><a class="header-anchor" href="#✅-webpack-适合-大型企业级应用" aria-hidden="true">#</a> ✅ Webpack：适合 <strong>大型企业级应用</strong></h3><ul><li>需要支持 IE11；</li><li>项目结构复杂（多入口、微前端、自定义 loader）；</li><li>需要精细控制构建流程（如 DLL、持久缓存、自定义 runtime）；</li><li>已有大量 Webpack 配置资产（迁移成本高）。</li></ul><blockquote><p>📌 你的 Backstage 插件若需兼容旧环境或深度集成 Webpack 生态，仍可保留。</p></blockquote><hr><h3 id="✅-rollup-javascript-库-组件库-首选" tabindex="-1"><a class="header-anchor" href="#✅-rollup-javascript-库-组件库-首选" aria-hidden="true">#</a> ✅ Rollup：<strong>JavaScript 库 / 组件库 首选</strong></h3><ul><li>构建 React 组件库（如你用 TSDX 的场景）；</li><li>输出干净、无运行时的代码（UMD + ESM 双格式）；</li><li>需要极致 Tree Shaking（如工具函数库）；</li><li>不涉及复杂资源（CSS/图片由使用者处理）。</li></ul><blockquote><p>💡 你当前的 monorepo 中 “组件库” 部分，<strong>Rollup（或 TSDX，本质是 Rollup 封装）仍是最佳选择</strong>。</p></blockquote><hr><h3 id="✅-vite-现代-web-应用开发的首选" tabindex="-1"><a class="header-anchor" href="#✅-vite-现代-web-应用开发的首选" aria-hidden="true">#</a> ✅ Vite：<strong>现代 Web 应用开发的首选</strong></h3><ul><li>使用 React/Vue/Svelte 等现代框架；</li><li>追求极致开发体验（启动快、HMR 快）；</li><li>无需支持 IE11；</li><li>项目为 SPA 或中后台系统（如你的工单系统 <code>my-ticket-agent</code>）；</li><li>希望简化配置，快速集成 TS/JSX/CSS Modules/Ant Design。</li></ul><blockquote><p>💡 <strong>强烈建议你将 <code>my-ticket-agent</code> 的开发环境从 Webpack 迁移到 Vite</strong>，可大幅提升 DX。</p></blockquote><hr><h2 id="五、如何选择-——-决策树" tabindex="-1"><a class="header-anchor" href="#五、如何选择-——-决策树" aria-hidden="true">#</a> 五、如何选择？—— 决策树</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>你的项目是？\n│\n├── 是一个 **JavaScript/TypeScript 库**（如组件库、工具函数）？\n│    └── ✅ 用 **Rollup**（或 TSDX / tsup）\n│\n├── 是一个 **现代 Web 应用**（React + AntD + TS）？\n│    ├── 需要支持 IE11？\n│    │    └── 用 **Webpack**\n│    └── 仅支持现代浏览器？\n│         └── ✅ 用 **Vite**\n│\n└── 是一个 **超大型遗留系统**，已有复杂 Webpack 配置？\n     └── 保守起见，**继续用 Webpack**，或逐步引入 Vite（通过 `vite-plugin-react` 渐进迁移）\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="六、总结" tabindex="-1"><a class="header-anchor" href="#六、总结" aria-hidden="true">#</a> 六、总结</h2><table><thead><tr><th>工具</th><th>优势</th><th>劣势</th><th>推荐场景</th></tr></thead><tbody><tr><td>Webpack</td><td>全能、兼容性强、生态成熟</td><td>慢、配置复杂</td><td>企业级应用、IE11 项目</td></tr><tr><td>Rollup</td><td>输出干净、Tree Shaking 优秀、无运行时</td><td>不处理非 JS、无 Dev Server</td><td>库/组件开发</td></tr><tr><td>Vite</td><td>开发极速、配置简单、现代标准</td><td>不支持 IE、插件生态较新</td><td>现代 Web 应用（React/Vue）</td></tr></tbody></table><hr><h2 id="附加建议-针对你的项目" tabindex="-1"><a class="header-anchor" href="#附加建议-针对你的项目" aria-hidden="true">#</a> 附加建议（针对你的项目）</h2>',59),g=(0,r._)("li",null,[(0,r._)("strong",null,"组件库（monorepo 中的 packages/components）"),(0,r.Uk)(" → "),(0,r._)("strong",null,"继续用 TSDX / Rollup"),(0,r.Uk)("，输出 UMD + ESM；")],-1),p=(0,r._)("li",null,[(0,r._)("strong",null,[(0,r.Uk)("调试 SPA（如 "),(0,r._)("code",null,"my-ticket-agent"),(0,r.Uk)("）")]),(0,r.Uk)(" → "),(0,r._)("strong",null,"迁移到 Vite"),(0,r.Uk)("，获得秒级启动和 Fast Refresh；")],-1),b=(0,r._)("strong",null,"Backstage 插件",-1),k=(0,r.Uk)(" → 若为独立部署的前端，可用 Vite；若需深度集成 Backstage 的 Webpack 链，可保留 Webpack，或探索 "),S={href:"https://vitejs.dev/guide/micro-frontend.html",target:"_blank",rel:"noopener noreferrer"},v=(0,r.Uk)("Vite + Remote Module"),_=(0,r.Uk)(" 方案。"),E=(0,r._)("p",null,[(0,r.Uk)("如需我为你生成 "),(0,r._)("code",null,"vite.config.ts"),(0,r.Uk)(" 配置（含 Ant Design 按需加载、ESLint、别名等），或 Rollup 库构建配置，欢迎随时提出！")],-1),m={},R=(0,l(3744).Z)(m,[["render",function(t,e){const l=(0,r.up)("RouterLink"),m=(0,r.up)("ExternalLinkIcon");return(0,r.wg)(),(0,r.iD)(r.HY,null,[a,n,(0,r._)("ul",null,[(0,r._)("li",null,[i,(0,r.Wm)(l,{to:"/interview-prep/matrix__bundler-webpack-vite-rollup.html#%E5%AF%B9%E6%AF%94%E8%A1%A8%E6%A0%BC"},{default:(0,r.w5)((()=>[d])),_:1})]),(0,r._)("li",null,[s,(0,r._)("ul",null,[(0,r._)("li",null,[(0,r.Wm)(l,{to:"/interview-prep/tech__webpack.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,r.w5)((()=>[o])),_:1})]),(0,r._)("li",null,[(0,r.Wm)(l,{to:"/interview-prep/tech__vite.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,r.w5)((()=>[h])),_:1})]),(0,r._)("li",null,[(0,r.Wm)(l,{to:"/interview-prep/tech__rollup.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,r.w5)((()=>[u])),_:1})])])])]),c,(0,r._)("ol",null,[g,p,(0,r._)("li",null,[b,k,(0,r._)("a",S,[v,(0,r.Wm)(m)]),_])]),E],64)}]])}}]);