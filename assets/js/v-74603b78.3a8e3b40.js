"use strict";(self.webpackChunkmd_vuepress=self.webpackChunkmd_vuepress||[]).push([[2233],{8788:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-74603b78",path:"/performance/",title:"ç”¨æˆ·ä¸­å¿ƒå‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ–‡æ¡£",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"ä¸€ã€ä¼˜åŒ–åŸåˆ™ä¸ç­–ç•¥",slug:"ä¸€ã€ä¼˜åŒ–åŸåˆ™ä¸ç­–ç•¥",children:[{level:3,title:"âœ… å¯å®æ–½åŸåˆ™",slug:"âœ…-å¯å®æ–½åŸåˆ™",children:[]},{level:3,title:"ğŸ¯ ä¼˜åŒ–æ–¹å‘",slug:"ğŸ¯-ä¼˜åŒ–æ–¹å‘",children:[]}]},{level:2,title:"äºŒã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ",slug:"äºŒã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ",children:[{level:3,title:"1. ç½‘ç»œä¼ è¾“ä¼˜åŒ–",slug:"_1-ç½‘ç»œä¼ è¾“ä¼˜åŒ–",children:[]},{level:3,title:"2. èµ„æºä½“ç§¯ä¼˜åŒ–",slug:"_2-èµ„æºä½“ç§¯ä¼˜åŒ–",children:[]},{level:3,title:"3. æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–",slug:"_3-æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–",children:[]},{level:3,title:"4. ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–",slug:"_4-ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–",children:[]}]},{level:2,title:"ä¸‰ã€æ„å»ºé…ç½®å…³é”®ä¿®æ”¹ï¼ˆWebpack 3ï¼‰",slug:"ä¸‰ã€æ„å»ºé…ç½®å…³é”®ä¿®æ”¹-webpack-3",children:[{level:3,title:"1. HTML å‹ç¼©",slug:"_1-html-å‹ç¼©",children:[]},{level:3,title:"2. Gzip é¢„å‹ç¼©ï¼ˆå¯é€‰ï¼‰",slug:"_2-gzip-é¢„å‹ç¼©-å¯é€‰",children:[]}]},{level:2,title:"å››ã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”",slug:"å››ã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”",children:[]},{level:2,title:"äº”ã€åç»­å»ºè®®",slug:"äº”ã€åç»­å»ºè®®",children:[]}],git:{updatedTime:1770275296e3},filePathRelative:"performance/README.md"}},7202:(n,s,a)=>{a.r(s),a.d(s,{default:()=>L});var t=a(6252);const e=(0,t.uE)('<h1 id="ç”¨æˆ·ä¸­å¿ƒå‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·ä¸­å¿ƒå‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ–‡æ¡£" aria-hidden="true">#</a> ç”¨æˆ·ä¸­å¿ƒå‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ–‡æ¡£</h1><blockquote><p><strong>é¡¹ç›®èƒŒæ™¯</strong>ï¼šç”¨æˆ·ä¸­å¿ƒæ˜¯ä¸€ä¸ªåŸºäº <strong>Vue 2 + Vuex + Webpack 3</strong> çš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œè¿‘æœŸæ”¶åˆ°åé¦ˆï¼š<strong>ç§»åŠ¨ç«¯ç™»å½•é¡µå¶å‘åŠ è½½ç¼“æ…¢</strong>ã€‚<br><strong>çº¦æŸæ¡ä»¶</strong>ï¼šä¸´è¿‘æ˜¥èŠ‚ï¼Œå¹´åæœ‰é‡æ„è®¡åˆ’ï¼Œ<strong>ä»…å…è®¸å°æ”¹åŠ¨ã€ä½é£é™©ã€é«˜æ”¶ç›Š</strong>çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚<br><strong>ç›®æ ‡</strong>ï¼š<strong>æ˜¾è‘—é™ä½é¦–å±ç™½å±æ—¶é—´ï¼ˆFCP/LCPï¼‰</strong>ï¼Œæå‡ç”¨æˆ·æ„ŸçŸ¥æ€§èƒ½ï¼ŒLighthouse è¯„åˆ†ä» 30+ æå‡è‡³ 70+ã€‚</p></blockquote><hr><h2 id="ä¸€ã€ä¼˜åŒ–åŸåˆ™ä¸ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ä¼˜åŒ–åŸåˆ™ä¸ç­–ç•¥" aria-hidden="true">#</a> ä¸€ã€ä¼˜åŒ–åŸåˆ™ä¸ç­–ç•¥</h2><h3 id="âœ…-å¯å®æ–½åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#âœ…-å¯å®æ–½åŸåˆ™" aria-hidden="true">#</a> âœ… å¯å®æ–½åŸåˆ™</h3><ul><li><strong>ä¸å¼•å…¥ SSR</strong>ï¼šæ—  SEO éœ€æ±‚ï¼ŒåŒæ„æ”¹é€ æˆæœ¬é«˜ï¼›</li><li><strong>ä¸å¤§å¹…åˆ å‡ä¸šåŠ¡ä»£ç </strong>ï¼šé¿å…å¼•å…¥å›å½’ Bugï¼›</li><li><strong>ä¼˜å…ˆç½‘ç»œä¸æ¸²æŸ“å±‚ä¼˜åŒ–</strong>ï¼šè§æ•ˆå¿«ã€é£é™©ä½ï¼›</li><li><strong>ä¿ç•™ç°æœ‰æ¶æ„</strong>ï¼šä»…è°ƒæ•´æ„å»ºé…ç½®ä¸èµ„æºåŠ è½½ç­–ç•¥ã€‚</li></ul><h3 id="ğŸ¯-ä¼˜åŒ–æ–¹å‘" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-ä¼˜åŒ–æ–¹å‘" aria-hidden="true">#</a> ğŸ¯ ä¼˜åŒ–æ–¹å‘</h3><table><thead><tr><th>å±‚çº§</th><th>ç›®æ ‡</th><th>å…³é”®æ‰‹æ®µ</th></tr></thead><tbody><tr><td><strong>ç½‘ç»œä¼ è¾“</strong></td><td>ç¼©çŸ­èµ„æºä¸‹è½½æ—¶é—´</td><td>TLS 1.3ã€DNS é¢„è§£æã€Preconnectã€Preload</td></tr><tr><td><strong>èµ„æºä½“ç§¯</strong></td><td>å‡å°‘æ— æ•ˆä»£ç </td><td>PurgeCSSã€Core-JS æŒ‰éœ€å¼•å…¥ã€å­—ä½“å‹ç¼©</td></tr><tr><td><strong>æµè§ˆå™¨æ¸²æŸ“</strong></td><td>åŠ å¿«é¦–æ¬¡å†…å®¹ç»˜åˆ¶</td><td>å†…è”å…³é”®èµ„æºã€Font Displayã€å–æ¶ˆéå¿…è¦æŒ‰éœ€åŠ è½½</td></tr><tr><td><strong>ç”¨æˆ·æ„ŸçŸ¥</strong></td><td>æ©ç›–åŠ è½½å»¶è¿Ÿ</td><td>Loading åŠ¨ç”»ã€éª¨æ¶å±ï¼ˆSkeletonï¼‰</td></tr></tbody></table><hr><h2 id="äºŒã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#äºŒã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ" aria-hidden="true">#</a> äºŒã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ</h2><h3 id="_1-ç½‘ç»œä¼ è¾“ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_1-ç½‘ç»œä¼ è¾“ä¼˜åŒ–" aria-hidden="true">#</a> 1. ç½‘ç»œä¼ è¾“ä¼˜åŒ–</h3><h4 id="_1-1-å¯ç”¨-tls-1-3" tabindex="-1"><a class="header-anchor" href="#_1-1-å¯ç”¨-tls-1-3" aria-hidden="true">#</a> 1.1 å¯ç”¨ TLS 1.3</h4><ul><li><strong>é—®é¢˜</strong>ï¼šInitial Connection ä¸ SSL æ¡æ‰‹è€—æ—¶æ³¢åŠ¨å¤§ï¼ˆå°¤å…¶å¼±ç½‘ï¼‰ï¼›</li><li><strong>æ–¹æ¡ˆ</strong>ï¼šåœ¨é˜¿é‡Œäº‘ CDN/æœåŠ¡å™¨ä¸Š<strong>å¼€å¯ TLS 1.3</strong>ï¼›</li><li><strong>æ•ˆæœ</strong>ï¼šå‡å°‘ 1-2 æ¬¡ RTTï¼ŒSSL æ¡æ‰‹ä» 2-RTT é™è‡³ 1-RTT æˆ– 0-RTTï¼›</li><li><strong>éªŒè¯</strong>ï¼šChrome DevTools &gt; Security é¢æ¿ç¡®è®¤åè®®ç‰ˆæœ¬ã€‚</li></ul><h4 id="_1-2-é¦–å±-html-æ§åˆ¶åœ¨-14kb-ä»¥å†…" tabindex="-1"><a class="header-anchor" href="#_1-2-é¦–å±-html-æ§åˆ¶åœ¨-14kb-ä»¥å†…" aria-hidden="true">#</a> 1.2 é¦–å± HTML æ§åˆ¶åœ¨ 14KB ä»¥å†…</h4><ul><li><strong>Why 14KB</strong>ï¼šTCP åˆå§‹æ‹¥å¡çª—å£ï¼ˆIW10ï¼‰çº¦ 14KBï¼Œå¯<strong>1 ä¸ª RTT ä¼ å®Œ</strong>ï¼›</li><li><strong>æªæ–½</strong>ï¼š <ul><li>ä½¿ç”¨ <code>html-webpack-plugin</code> å¼€å¯ <code>minify</code>ï¼›</li><li><strong>ç§»é™¤å†…è” <code>&lt;style&gt;</code></strong>ï¼Œç»Ÿä¸€ç”± <code>mini-css-extract-plugin</code> æå–ï¼›</li><li><strong>ç§»é™¤å†…è” <code>&lt;script&gt;</code></strong>ï¼Œè„šæœ¬åˆå¹¶è‡³å…¥å£æ–‡ä»¶ã€‚</li></ul></li></ul><h4 id="_1-3-é¢„è¿æ¥ä¸-dns-é¢„è§£æ" tabindex="-1"><a class="header-anchor" href="#_1-3-é¢„è¿æ¥ä¸-dns-é¢„è§£æ" aria-hidden="true">#</a> 1.3 é¢„è¿æ¥ä¸ DNS é¢„è§£æ</h4><p>åœ¨ <code>&lt;head&gt;</code> ä¸­æ·»åŠ ï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- é¢„è§£æ DNS --&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//ga.example.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//apm.dji.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//cdn.alibaba.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n\n<span class="token comment">&lt;!-- é¢„å»ºç«‹è¿æ¥ï¼ˆå« TLSï¼‰ --&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preconnect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://apm.dji.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-4-å…³é”®èµ„æº-preload" tabindex="-1"><a class="header-anchor" href="#_1-4-å…³é”®èµ„æº-preload" aria-hidden="true">#</a> 1.4 å…³é”®èµ„æº Preload</h4><ul><li><strong>é—®é¢˜</strong>ï¼šä¸» JS/CSS è¢«æµè§ˆå™¨ä½ä¼˜å…ˆçº§åŠ è½½ï¼›</li><li><strong>æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>preload-webpack-plugin</code>ï¼ˆWebpack 3 å…¼å®¹ç‰ˆï¼‰ï¼š<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>\n<span class="token keyword">const</span> PreloadWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;preload-webpack-plugin&#39;</span><span class="token punctuation">)</span>\n<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n  <span class="token keyword">new</span> <span class="token class-name">PreloadWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;preload&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;vendor&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æŒ‡å®š chunk</span>\n    <span class="token literal-property property">fileBlacklist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.map$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><strong>æ•ˆæœ</strong>ï¼šå…³é”®èµ„æºä¼˜å…ˆçº§æå‡è‡³ <code>High</code>ï¼Œæå‰ä¸‹è½½ã€‚</li></ul><hr><h3 id="_2-èµ„æºä½“ç§¯ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-èµ„æºä½“ç§¯ä¼˜åŒ–" aria-hidden="true">#</a> 2. èµ„æºä½“ç§¯ä¼˜åŒ–</h3><h4 id="_2-1-æŒ‰éœ€å¼•å…¥-polyfill-core-js" tabindex="-1"><a class="header-anchor" href="#_2-1-æŒ‰éœ€å¼•å…¥-polyfill-core-js" aria-hidden="true">#</a> 2.1 æŒ‰éœ€å¼•å…¥ Polyfillï¼ˆCore-JSï¼‰</h4>',23),p=(0,t.uE)('<li><strong>é—®é¢˜</strong>ï¼š<code>babel-polyfill</code> å…¨é‡å¼•å…¥ï¼Œvendor ä½“ç§¯è‡ƒè‚¿ï¼›</li><li><strong>æ–¹æ¡ˆ</strong>ï¼š <ol><li>å‡çº§ Babel 7ï¼›</li><li>ç§»é™¤ <code>babel-polyfill</code>ï¼›</li><li>é…ç½® <code>.babelrc</code>ï¼š<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>\n      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.1&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol></li>',2),l=(0,t._)("strong",null,"âš ï¸ é‡è¦",-1),o=(0,t.Uk)("ï¼š"),r=(0,t._)("strong",null,[(0,t.Uk)("ç¦ç”¨ "),(0,t._)("code",null,"@babel/plugin-transform-runtime")],-1),c=(0,t.Uk)("ï¼Œå¦åˆ™ "),i=(0,t._)("code",null,'useBuiltIns: "usage"',-1),u=(0,t.Uk)(" å¤±æ•ˆï¼ˆ"),d={href:"https://github.com/babel/babel/issues/10271#issuecomment-528379505",target:"_blank",rel:"noopener noreferrer"},k=(0,t.Uk)("å®˜æ–¹ issue"),g=(0,t.Uk)("ï¼‰ã€‚"),h=(0,t._)("h4",{id:"_2-2-åˆ é™¤æœªä½¿ç”¨-css-purgecss",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-2-åˆ é™¤æœªä½¿ç”¨-css-purgecss","aria-hidden":"true"},"#"),(0,t.Uk)(" 2.2 åˆ é™¤æœªä½¿ç”¨ CSSï¼ˆPurgeCSSï¼‰")],-1),b=(0,t._)("li",null,[(0,t._)("strong",null,"é—®é¢˜"),(0,t.Uk)("ï¼šAnt Design ç­‰ UI åº“å¼•å…¥å¤§é‡æœªç”¨æ ·å¼ï¼›")],-1),m=(0,t._)("li",null,[(0,t._)("strong",null,"æ–¹æ¡ˆ"),(0,t.Uk)("ï¼šé€šè¿‡ PostCSS é›†æˆ PurgeCSSï¼›")],-1),f=(0,t._)("strong",null,"âš ï¸ CSS Modules å…¼å®¹",-1),v=(0,t.Uk)("ï¼š"),y=(0,t._)("br",null,null,-1),_=(0,t.Uk)(" è‹¥ä½¿ç”¨ CSS Modulesï¼Œ"),x=(0,t._)("strong",null,"å¿…é¡»ä¿ç•™åŸå§‹ class ååŒ¹é…é€»è¾‘",-1),q=(0,t.Uk)("ï¼Œå‚è€ƒ "),S={href:"https://purgecss.com/css_modules.html",target:"_blank",rel:"noopener noreferrer"},C=(0,t.Uk)("å®˜æ–¹æ–¹æ¡ˆ"),P=(0,t.uE)('ï¼š<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js ä¸­ css-loader é…ç½®</span>\n<span class="token punctuation">{</span>\n  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">getLocalIdent</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;react-dev-utils/getCSSModuleLocalIdent&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// PurgeCSS content é…ç½®éœ€åŒ…å«æ‰€æœ‰ JS/JSX</span>\n<span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span>paths<span class="token punctuation">.</span>appHtml<span class="token punctuation">,</span> <span class="token operator">...</span>glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>appSrc<span class="token punctuation">,</span> <span class="token string">&#39;/**/*.{js,jsx}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',2),j=(0,t.uE)('<h4 id="_2-3-å­—ä½“ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-3-å­—ä½“ä¼˜åŒ–" aria-hidden="true">#</a> 2.3 å­—ä½“ä¼˜åŒ–</h4><ul><li><strong>æ ¼å¼å‡çº§</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <strong>WOFF2</strong>ï¼ˆæ¯” WOFF å° 20-30%ï¼‰ï¼›</li><li><strong>å‹ç¼©</strong>ï¼šä½¿ç”¨ <code>fontmin-webpack</code> æ’ä»¶ï¼Œä»…ä¿ç•™ä¸­æ–‡/è‹±æ–‡å­—ç¬¦å­é›†ï¼›</li><li><strong>ç¼“å­˜</strong>ï¼šé€šè¿‡ Service Worker ç¼“å­˜å­—ä½“æ–‡ä»¶ï¼ˆCache APIï¼‰ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚</li></ul><hr><h3 id="_3-æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–" aria-hidden="true">#</a> 3. æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–</h3><h4 id="_3-1-å–æ¶ˆç™»å½•é¡µæŒ‰éœ€åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_3-1-å–æ¶ˆç™»å½•é¡µæŒ‰éœ€åŠ è½½" aria-hidden="true">#</a> 3.1 å–æ¶ˆç™»å½•é¡µæŒ‰éœ€åŠ è½½</h4><ul><li><strong>é—®é¢˜</strong>ï¼šç™»å½•é¡µä½œä¸ºç€é™†é¡µï¼Œä¸åº”å—è·¯ç”±æ‡’åŠ è½½é™åˆ¶ï¼›</li><li><strong>æ–¹æ¡ˆ</strong>ï¼šå°†ç™»å½•é¡µç»„ä»¶<strong>ç›´æ¥æ‰“åŒ…è¿›ä¸» bundleï¼ˆapp.jsï¼‰</strong>ï¼›</li><li><strong>ç»“æœ</strong>ï¼šä¸»åŒ…ä» 156KB â†’ <strong>172KBï¼ˆ+16KBï¼‰</strong>ï¼Œä½†<strong>æ¶ˆé™¤ä¸€æ¬¡ç½‘ç»œè¯·æ±‚</strong>ï¼ŒFCP æå‡æ˜¾è‘—ã€‚</li></ul><h4 id="_3-2-éå…³é”®è„šæœ¬å¼‚æ­¥åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_3-2-éå…³é”®è„šæœ¬å¼‚æ­¥åŠ è½½" aria-hidden="true">#</a> 3.2 éå…³é”®è„šæœ¬å¼‚æ­¥åŠ è½½</h4><ul><li><strong>ç¬¬ä¸‰æ–¹è„šæœ¬</strong>ï¼ˆGAã€APMï¼‰ä½¿ç”¨ <code>async</code>ï¼š<div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://ga.example.com/analytics.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><strong>è‡ªå®šä¹‰éå…³é”® JS</strong> ä½¿ç”¨ <code>defer</code>ï¼ˆä¿è¯æ‰§è¡Œé¡ºåºï¼‰ã€‚</li></ul><h4 id="_3-3-å­—ä½“æ¸²æŸ“ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-3-å­—ä½“æ¸²æŸ“ä¼˜åŒ–" aria-hidden="true">#</a> 3.3 å­—ä½“æ¸²æŸ“ä¼˜åŒ–</h4><ul><li><strong>é—®é¢˜</strong>ï¼šè‡ªå®šä¹‰å­—ä½“åŠ è½½å‰æ–‡å­—ä¸å¯è§ï¼ˆFOITï¼‰ï¼›</li><li><strong>æ–¹æ¡ˆ</strong>ï¼šCSS ä¸­æ·»åŠ ï¼š<div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;MyFont&#39;</span><span class="token punctuation">;</span>\n  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&#39;myfont.woff2&#39;</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;woff2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span> <span class="token comment">/* å…ˆæ˜¾ç¤ºå¤‡ç”¨å­—ä½“ï¼Œå†æ›¿æ¢ */</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><hr><h3 id="_4-ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–" aria-hidden="true">#</a> 4. ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–</h3><h4 id="_4-1-å…¨å±€-loading-åŠ¨ç”»" tabindex="-1"><a class="header-anchor" href="#_4-1-å…¨å±€-loading-åŠ¨ç”»" aria-hidden="true">#</a> 4.1 å…¨å±€ Loading åŠ¨ç”»</h4><ul><li>åœ¨ <code>App.vue</code> ä¸­ç»Ÿä¸€ç®¡ç† loading çŠ¶æ€ï¼›</li><li>è®¾è®¡æä¾›è½»é‡çº§åŠ¨ç”»ï¼ˆé¿å…å¤æ‚ SVG/CSS åŠ¨ç”»é˜»å¡ä¸»çº¿ç¨‹ï¼‰ã€‚</li></ul><h4 id="_4-2-éª¨æ¶å±-skeleton" tabindex="-1"><a class="header-anchor" href="#_4-2-éª¨æ¶å±-skeleton" aria-hidden="true">#</a> 4.2 éª¨æ¶å±ï¼ˆSkeletonï¼‰</h4><ul><li>ä¸ºç™»å½•é¡µå®šåˆ¶é™æ€éª¨æ¶å± HTMLï¼ˆå†…è”åœ¨ <code>&lt;body&gt;</code> ä¸­ï¼‰ï¼›</li><li>ç”¨æˆ·çœ‹åˆ°<strong>ç»“æ„å ä½</strong>ï¼Œæ„ŸçŸ¥â€œå†…å®¹å³å°†åŠ è½½â€ï¼Œé™ä½ç­‰å¾…ç„¦è™‘ã€‚</li></ul><h4 id="_4-3-æ¸è¿›å¼æ¸²æŸ“" tabindex="-1"><a class="header-anchor" href="#_4-3-æ¸è¿›å¼æ¸²æŸ“" aria-hidden="true">#</a> 4.3 æ¸è¿›å¼æ¸²æŸ“</h4><ul><li>é¡µé¢ç»“æ„å…ˆæ¸²æŸ“ï¼ˆå«éª¨æ¶å±ï¼‰ï¼›</li><li>æ¥å£æ•°æ®è¿”å›åå†å¡«å……å¯äº¤äº’å†…å®¹ï¼ˆå¦‚è¡¨å•ã€æŒ‰é’®ï¼‰ã€‚</li></ul><hr><h2 id="ä¸‰ã€æ„å»ºé…ç½®å…³é”®ä¿®æ”¹-webpack-3" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ„å»ºé…ç½®å…³é”®ä¿®æ”¹-webpack-3" aria-hidden="true">#</a> ä¸‰ã€æ„å»ºé…ç½®å…³é”®ä¿®æ”¹ï¼ˆWebpack 3ï¼‰</h2><h3 id="_1-html-å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#_1-html-å‹ç¼©" aria-hidden="true">#</a> 1. HTML å‹ç¼©</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">removeRedundantAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-gzip-é¢„å‹ç¼©-å¯é€‰" tabindex="-1"><a class="header-anchor" href="#_2-gzip-é¢„å‹ç¼©-å¯é€‰" aria-hidden="true">#</a> 2. Gzip é¢„å‹ç¼©ï¼ˆå¯é€‰ï¼‰</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span>\n<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n  <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[path].gz[query]&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">&#39;gzip&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(js|css|html|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">8192</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">minRatio</span><span class="token operator">:</span> <span class="token number">0.8</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><strong>æ³¨æ„</strong>ï¼šNginx éœ€é…ç½® <code>gzip_static on;</code> ä¼˜å…ˆè¿”å› <code>.gz</code> æ–‡ä»¶ã€‚</p></blockquote><hr><h2 id="å››ã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å››ã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”" aria-hidden="true">#</a> å››ã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h2><table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td><strong>FCPï¼ˆå¹³å‡ï¼‰</strong></td><td>1593 ms</td><td>1281 ms</td><td><strong>+19.6%</strong></td></tr><tr><td><strong>FCPï¼ˆ95 åˆ†ä½ï¼‰</strong></td><td>3258 ms</td><td>2344 ms</td><td><strong>+28.1%</strong></td></tr><tr><td><strong>LCPï¼ˆå¹³å‡ï¼‰</strong></td><td>1801 ms</td><td>1454 ms</td><td><strong>+19.3%</strong></td></tr><tr><td><strong>LCPï¼ˆ95 åˆ†ä½ï¼‰</strong></td><td>3797 ms</td><td>2700 ms</td><td><strong>+28.9%</strong></td></tr><tr><td><strong>Loadï¼ˆå¹³å‡ï¼‰</strong></td><td>1431 ms</td><td>906 ms</td><td><strong>+36.7%</strong></td></tr><tr><td><strong>Lighthouse è¯„åˆ†</strong></td><td>30+</td><td>70+</td><td><strong>+133%</strong></td></tr></tbody></table><blockquote><p><strong>ç»“è®º</strong>ï¼šé€šè¿‡<strong>ä½é£é™©ã€å°æ”¹åŠ¨</strong>çš„ç»„åˆä¼˜åŒ–ï¼Œ<strong>é¦–å±æ€§èƒ½æå‡ 20%+</strong>ï¼Œç”¨æˆ·ç™½å±æ—¶é—´æ˜¾è‘—ç¼©çŸ­ã€‚</p></blockquote><hr><h2 id="äº”ã€åç»­å»ºè®®" tabindex="-1"><a class="header-anchor" href="#äº”ã€åç»­å»ºè®®" aria-hidden="true">#</a> äº”ã€åç»­å»ºè®®</h2><ol><li><strong>ç›‘æ§</strong>ï¼šæ¥å…¥å‰ç«¯æ€§èƒ½ç›‘æ§ï¼ˆå¦‚ Web Vitalsï¼‰ï¼ŒæŒç»­è·Ÿè¸ª FCP/LCPï¼›</li><li><strong>é‡æ„æœŸ</strong>ï¼šè¿ç§»è‡³ Vue 3 + Viteï¼Œå½»åº•è§£å†³æ„å»ºä¸è¿è¡Œæ—¶æ€§èƒ½ç“¶é¢ˆï¼›</li><li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šç²¾ç»†åŒ–æ§åˆ¶ Service Worker ç¼“å­˜ï¼Œå®ç°ç¦»çº¿å¯ç”¨ã€‚</li></ol><hr><blockquote><p><strong>æ³¨</strong>ï¼šæœ¬æ–‡æ‰€æœ‰ä¼˜åŒ–æ–¹æ¡ˆå‡å·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œ<strong>æ— ä¸šåŠ¡åŠŸèƒ½æ”¹åŠ¨ï¼Œä»…é…ç½®ä¸èµ„æºç­–ç•¥è°ƒæ•´</strong>ï¼Œç¬¦åˆâ€œå°æ”¹åŠ¨ã€å¿«ä¸Šçº¿â€è¦æ±‚ã€‚</p></blockquote>',34),w={},L=(0,a(3744).Z)(w,[["render",function(n,s){const a=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)(t.HY,null,[e,(0,t._)("ul",null,[p,(0,t._)("li",null,[l,o,r,c,i,u,(0,t._)("a",d,[k,(0,t.Wm)(a)]),g])]),h,(0,t._)("ul",null,[b,m,(0,t._)("li",null,[f,v,y,_,x,q,(0,t._)("a",S,[C,(0,t.Wm)(a)]),P])]),j],64)}]])}}]);