"use strict";(self.webpackChunkmd_vuepress=self.webpackChunkmd_vuepress||[]).push([[5890],{5111:(l,e,t)=>{t.r(e),t.d(e,{data:()=>o});const o={key:"v-14e2b36d",path:"/job-description/lib/10-XDR%E7%B3%BB%E7%BB%9F-NestJS%E5%85%A8%E6%A0%88-Hard-Mode-%E9%9D%A2%E8%AF%95%E9%A2%98.html",title:"XDR 系统（魔方大屏 + 报表）- NestJS 全栈 Hard-Mode 面试题",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"1. NestJS 架构与工程设计",slug:"_1-nestjs-架构与工程设计",children:[]},{level:2,title:"2. MongoDB/Mongoose：Schema 设计与性能",slug:"_2-mongodb-mongoose-schema-设计与性能",children:[]},{level:2,title:"3. 定时任务：可靠性与可观测性",slug:"_3-定时任务-可靠性与可观测性",children:[]},{level:2,title:"4. 报表导出（PDF/PPT/DOCX）：链路设计",slug:"_4-报表导出-pdf-ppt-docx-链路设计",children:[]},{level:2,title:"5. 实时大屏（ECharts + WebSocket）：性能与数据策略",slug:"_5-实时大屏-echarts-websocket-性能与数据策略",children:[]}],git:{updatedTime:1767433666e3},filePathRelative:"job-description/lib/10-XDR系统-NestJS全栈-Hard-Mode-面试题.md"}},9298:(l,e,t)=>{t.r(e),t.d(e,{default:()=>s});const o=(0,t(6252).uE)('<h1 id="xdr-系统-魔方大屏-报表-nestjs-全栈-hard-mode-面试题" tabindex="-1"><a class="header-anchor" href="#xdr-系统-魔方大屏-报表-nestjs-全栈-hard-mode-面试题" aria-hidden="true">#</a> XDR 系统（魔方大屏 + 报表）- NestJS 全栈 Hard-Mode 面试题</h1><blockquote><p>覆盖：NestJS 架构与 DI、Mongo/Mongoose 建模、定时任务可靠性、报表导出链路、实时大屏性能</p></blockquote><hr><h2 id="_1-nestjs-架构与工程设计" tabindex="-1"><a class="header-anchor" href="#_1-nestjs-架构与工程设计" aria-hidden="true">#</a> 1. NestJS 架构与工程设计</h2><ol><li><strong>Nest 的核心设计哲学是什么？你如何用它组织复杂业务？</strong><ul><li>追问：Module 的边界怎么划分？怎么避免“巨型模块”？</li></ul></li><li><strong>依赖注入（DI）带来的收益与代价是什么？你在哪些场景会避免 DI？</strong><ul><li>追问：循环依赖怎么处理？如何做可测试性设计？</li></ul></li><li><strong>中间件、守卫、拦截器、管道分别解决什么问题？你给出一个真实链路示例。</strong><ul><li>追问：鉴权、限流、日志、trace id、错误处理分别放哪里更合理？</li></ul></li></ol><hr><h2 id="_2-mongodb-mongoose-schema-设计与性能" tabindex="-1"><a class="header-anchor" href="#_2-mongodb-mongoose-schema-设计与性能" aria-hidden="true">#</a> 2. MongoDB/Mongoose：Schema 设计与性能</h2><ol start="4"><li><strong>你在 Mongo 里如何建模：嵌入 vs 引用（populate）的取舍？</strong><ul><li>追问：在报表/大屏场景下查询模式是什么？如何反推 schema？</li></ul></li><li><strong>索引怎么设计？你如何避免“索引很多但仍然慢”？</strong><ul><li>追问：复合索引、覆盖索引、索引选择性、慢查询分析怎么做？</li></ul></li><li><strong>聚合管道（aggregation）用在什么场景？如何控制聚合的资源消耗？</strong><ul><li>追问：$lookup 的代价是什么？有没有预计算/物化视图思路？</li></ul></li></ol><hr><h2 id="_3-定时任务-可靠性与可观测性" tabindex="-1"><a class="header-anchor" href="#_3-定时任务-可靠性与可观测性" aria-hidden="true">#</a> 3. 定时任务：可靠性与可观测性</h2><ol start="7"><li><strong>你用 @nestjs/schedule 做 cron：如何保证任务“不重复、不漏跑”？</strong><ul><li>追问：多实例部署时如何做分布式锁？</li></ul></li><li><strong>为什么需要任务队列（Bull）？和 cron 直接跑相比解决了什么？</strong><ul><li>追问：失败重试、幂等、延迟任务、死信队列怎么设计？</li></ul></li><li><strong>任务监控怎么做：你如何知道任务“慢了/堆积了/失败了”？</strong><ul><li>追问：监控指标与告警阈值如何定？</li></ul></li></ol><hr><h2 id="_4-报表导出-pdf-ppt-docx-链路设计" tabindex="-1"><a class="header-anchor" href="#_4-报表导出-pdf-ppt-docx-链路设计" aria-hidden="true">#</a> 4. 报表导出（PDF/PPT/DOCX）：链路设计</h2><ol start="10"><li><strong>导出为什么要异步？你如何设计“提交生成 → 查询进度 → 下载”的流程？</strong></li></ol><ul><li>追问：进度如何估算？失败如何补偿？</li></ul><ol start="11"><li><strong>模板引擎怎么选？你如何保证模板可维护、可复用、可版本化？</strong></li></ol><ul><li>追问：模板升级如何兼容历史报表？</li></ul><ol start="12"><li><strong>puppeteer 类方案在服务端的稳定性问题怎么处理？</strong></li></ol><ul><li>追问：并发、内存、超时、字体、中文渲染、容器化依赖怎么治理？</li></ul><hr><h2 id="_5-实时大屏-echarts-websocket-性能与数据策略" tabindex="-1"><a class="header-anchor" href="#_5-实时大屏-echarts-websocket-性能与数据策略" aria-hidden="true">#</a> 5. 实时大屏（ECharts + WebSocket）：性能与数据策略</h2><ol start="13"><li><strong>实时数据推送：你如何设计消息结构与订阅粒度，避免带宽与渲染被打爆？</strong></li></ol><ul><li>追问：全量推 vs 增量推？采样/聚合怎么做？</li></ul><ol start="14"><li><strong>ECharts 动态更新的性能边界在哪里？你怎么避免频繁 setOption 卡顿？</strong></li></ol><ul><li>追问：节流、分片、数据窗口、离屏计算（worker）怎么组合？</li></ul><ol start="15"><li><strong>你如何保证“数据正确性”与“实时性”的平衡？</strong></li></ol><ul><li>追问：乱序、重复、丢包如何处理？重连后如何追数据？</li></ul>',27),r={},s=(0,t(3744).Z)(r,[["render",function(l,e){return o}]])},3744:(l,e)=>{e.Z=(l,e)=>{const t=l.__vccOpts||l;for(const[l,o]of e)t[l]=o;return t}}}]);