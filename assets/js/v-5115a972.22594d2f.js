"use strict";(self.webpackChunkmd_vuepress=self.webpackChunkmd_vuepress||[]).push([[5800],{9629:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-5115a972",path:"/interview-prep/project__dji-rms.html",title:"大疆售后 RMS 系统重构",lang:"zh-CN",frontmatter:{id:"project__dji-rms",type:"project",title:"大疆售后 RMS 系统重构",mastery:"not_started",tags:["react","typescript","webpack","antd","engineering"],projects:["project__dji-rms"],source_refs:[{source:"resume",file:"docs/job-description/web前端开发工程师-彭聪.md",anchor:"大疆售后 RMS 系统重构"}],seed_refs:[{source:"outline",file:"docs/job-description/web前端开发工程师-彭聪-面试技术大纲.md",anchor:"2）Umi：ESLint 规范有哪些，以及如何整合到实践"}],updated_at:"2025-12-20T00:00:00.000Z"},excerpt:"",headers:[{level:2,title:"摘要（Auto）",slug:"摘要-auto",children:[]},{level:2,title:"建议追问（Auto）",slug:"建议追问-auto",children:[]},{level:2,title:"关联卡片",slug:"关联卡片",children:[]},{level:2,title:"在我项目中的角色与使用场景",slug:"在我项目中的角色与使用场景",children:[]},{level:2,title:"原理简述",slug:"原理简述",children:[]},{level:2,title:"对比表格",slug:"对比表格",children:[]},{level:2,title:"模拟问答",slug:"模拟问答",children:[]},{level:2,title:"手写代码区",slug:"手写代码区",children:[]},{level:2,title:"我的补充（Manual）",slug:"我的补充-manual",children:[]},{level:2,title:"复盘与反思（Learnings）",slug:"复盘与反思-learnings",children:[]},{level:2,title:"面试官追问（面试官视角）",slug:"面试官追问-面试官视角",children:[]}],git:{updatedTime:1766330718e3},filePathRelative:"interview-prep/project__dji-rms.md"}},6977:(n,s,a)=>{a.r(s),a.d(s,{default:()=>b});var e=a(6252);const t=(0,e.uE)('<h2 id="摘要-auto" tabindex="-1"><a class="header-anchor" href="#摘要-auto" aria-hidden="true">#</a> 摘要（Auto）</h2><ul><li>生成时间：2025-12-20</li><li>简历中出现的项目标题（提取）：大疆用户中心重构 / 大疆售后 RMS 系统重构 / 跨平台公告插件系统 / 大疆 DevOps 平台维护 / XDR 系统 - 魔方大屏 + 报表</li><li>面试大纲关键词（提取 Top10）：1）大疆用户中心重构：性能优化 + HTTP 原理 + Webpack 架构 / 性能指标与方法论 / 简历可落地点（结合你的“优化四板斧”） / HTTP 常考点（从“为什么变快”倒推） / Webpack 架构（工程化面试常考） / 按优化顺序，把方案“串起来”（排查 → 定位 → 选择 → 验证） / 0. 排查与基线（先把问题“量化”） / 1. 先保“可见”——骨架屏预渲染（直接拉低 LCP） / 2. 再减“阻塞”——关键渲染路径（CRP）梳理：CSS/字体/首图优先级 / 3. 再降“下载与解析成本”——更小的包体与更少的无效代码</li></ul><h2 id="建议追问-auto" tabindex="-1"><a class="header-anchor" href="#建议追问-auto" aria-hidden="true">#</a> 建议追问（Auto）</h2><ul><li>你为什么在该项目/场景里选择这个方案？替代方案为何不选？</li><li>最大一次事故/踩坑是什么？如何定位与回滚？</li><li>如果重做：架构/边界/工程化会怎么调整？</li></ul><h2 id="关联卡片" tabindex="-1"><a class="header-anchor" href="#关联卡片" aria-hidden="true">#</a> 关联卡片</h2>',5),p=(0,e.Uk)("技术： "),l=(0,e._)("code",null,"tech__react",-1),o=(0,e._)("code",null,"tech__typescript",-1),r=(0,e._)("code",null,"tech__webpack",-1),i=(0,e._)("code",null,"tech__performance",-1),c=(0,e._)("code",null,"tech__eslint-engineering",-1),u=(0,e.Uk)("对比： "),d=(0,e._)("code",null,"matrix__bundler-webpack-vite-rollup",-1),k=(0,e.uE)('<h2 id="在我项目中的角色与使用场景" tabindex="-1"><a class="header-anchor" href="#在我项目中的角色与使用场景" aria-hidden="true">#</a> 在我项目中的角色与使用场景</h2><p>项目前端负责人。负责多团队协作规范、工程体系与关键模块交付，目标是提升交付质量、降低 bug 率与维护成本。</p><h2 id="原理简述" tabindex="-1"><a class="header-anchor" href="#原理简述" aria-hidden="true">#</a> 原理简述</h2><p>我用“复杂系统重构”的叙事来讲清楚（面试建议用 CP-SO-L 结构）：</p><ul><li>Context（背景）： <ul><li>系统模块多、角色多（售后/工单/备件/权限/报表等），历史版本存在“权限散落、依赖耦合、发布风险高”的问题。</li></ul></li><li>Problem（问题）： <ul><li><strong>边界不清</strong>：跨模块直接互相 import，导致循环依赖/隐式耦合，需求一改全站受影响。</li><li><strong>权限不一致</strong>：页面/接口/按钮多个口径，容易漏控或误控。</li><li><strong>工程质量不稳定</strong>：缺少统一门禁与可观测性，线上问题回溯成本高。</li></ul></li><li>Solution（方案）： <ul><li><strong>模块划分</strong>：按“领域（domain）”拆分功能边界（路由、API、state、组件、权限）并约束依赖方向。</li><li><strong>权限体系</strong>：用 RBAC（角色-权限）为主，结合资源（resource）建模；把“菜单/路由/按钮”统一由权限生成。</li><li><strong>工程门禁</strong>：lint/typecheck/build 作为 CI 必选项；关键改动引入灰度与回滚开关。</li><li><strong>稳定性</strong>：错误边界 + 统一上报（错误、性能、关键交互）+ sourcemap 回溯链路。</li></ul></li><li>Outcome（结果口径）： <ul><li>以“可追溯、可回滚、可量化”为目标：发布风险下降、问题定位更快、跨团队协作摩擦减少。</li><li>面试不强行报数字：用“指标口径 + 验证方式”描述（例如构建时长、线上错误率、性能 vitals 分布）。</li></ul></li><li>Learnings（复盘）： <ul><li>重构不是“改代码”，核心是“<strong>边界 + 规范 + 治理闭环</strong>”，否则会回到旧路。</li></ul></li></ul><h2 id="对比表格" tabindex="-1"><a class="header-anchor" href="#对比表格" aria-hidden="true">#</a> 对比表格</h2><table><thead><tr><th>决策点</th><th>方案 A</th><th>方案 B</th><th>我怎么选（口径）</th></tr></thead><tbody><tr><td>权限模型</td><td>RBAC（角色-权限）</td><td>ABAC（属性/策略）</td><td>角色相对稳定用 RBAC 更易落地；复杂策略用“策略引擎”局部补充</td></tr><tr><td>前端权限</td><td>路由守卫 + 菜单生成</td><td>纯后端返回菜单</td><td>主控在前端但以“后端资源”为准；前端负责渲染与交互控制</td></tr><tr><td>表单方案</td><td>AntD Form/生态</td><td>自研表单引擎</td><td>中后台优先生态与效率；自研只在“强业务 DSL/高复用”才值得</td></tr><tr><td>工程门禁</td><td>一步到位 strict</td><td>渐进式（warn→error）</td><td>多团队协作优先渐进，给迁移窗口与修复清单</td></tr><tr><td>构建</td><td>Webpack</td><td>Vite</td><td>大存量 + 强定制优先 Webpack；Vite 作为旁路验证/新模块试点</td></tr></tbody></table><h2 id="模拟问答" tabindex="-1"><a class="header-anchor" href="#模拟问答" aria-hidden="true">#</a> 模拟问答</h2><ul><li>[ ] 你是如何设计权限与模块边界的？如何避免跨域依赖与循环引用？ <ul><li>先定义边界：按 domain 分包（例如 <code>features/*</code>），只允许通过 <code>shared/*</code> 暴露公共能力。</li><li>再定规则：禁止跨层 import（用 eslint rule / dep-cruiser 之类工具约束）。</li><li>权限落点：路由层（页面级）+ 组件层（按钮/字段级）统一走同一份权限数据结构。</li></ul></li><li>[ ] ESLint/Prettier/CI 门禁是如何让团队真的执行的？ <ul><li>先降低摩擦：<code>lint-staged</code> + <code>pre-commit</code> 自动修复；CI 再做强校验。</li><li>再渐进收敛：从 warning 列表开始，逐步清零后升级到 error。</li><li>关键是共识：把“常见坑/收益”写成短文档与例子，避免只靠强制。</li></ul></li><li>[ ] 你做过哪些性能治理？如何建立预算与回归机制？ <ul><li>指标：LCP/INP/CLS + 包体积 + 关键接口耗时。</li><li>治理：拆包、缓存、减少无效渲染、长任务定位；把预算（bundle upper bound）写进 CI。</li><li>回归：上线后看趋势（p75/p95），异常触发告警与回滚开关。</li></ul></li><li>[ ] 你怎么把 Prettier、ESLint、TypeScript 校验串成“真的执行”的闭环？ <ul><li>分工口径：Prettier 管格式；ESLint 管语义/质量/边界；TS 管类型正确性。</li><li>落地链路：IDE 保存自动修复 → <code>lint-staged</code> 只检查改动文件 → CI <code>--max-warnings=0</code> + typecheck → PR 门禁。</li><li>技术债策略：老代码目录/文件豁免 + 技术债清单 + 分阶段收敛（warning→error）。</li></ul></li><li>[ ] 你在 Code Review 里最看重哪些“高收益规则”？ <ul><li>Hooks 正确性：<code>rules-of-hooks</code>、<code>exhaustive-deps</code>（避免难复现线上问题）。</li><li>import 边界：<code>no-restricted-imports</code>（禁止跨层/深层路径，必须从模块出口导入）。</li><li>循环依赖：<code>import/no-cycle</code>（避免运行时奇怪行为）。</li><li>TS 边界：限制 <code>any</code>，必要豁免必须写理由注释，避免污染扩散。</li></ul></li></ul><h2 id="手写代码区" tabindex="-1"><a class="header-anchor" href="#手写代码区" aria-hidden="true">#</a> 手写代码区</h2><p>权限守卫（最小可解释实现，页面级 + 按钮级共用同一份权限）：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Perm</span> <span class="token operator">=</span> <span class="token builtin">string</span>\n<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span> perms<span class="token operator">:</span> Set<span class="token operator">&lt;</span>Perm<span class="token operator">&gt;</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">can</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">,</span> perm<span class="token operator">:</span> Perm<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> user<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">guardRoute</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">,</span> required<span class="token operator">:</span> Perm<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 失败路径：无权限直接拒绝渲染，避免“先看到后消失”</span>\n  <span class="token keyword">return</span> required<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">can</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 用法：route.meta.requiredPerms = [&quot;rms.order.view&quot;]</span>\n<span class="token comment">// if (!guardRoute(user, route.meta.requiredPerms)) redirect(&quot;/403&quot;);</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>错误边界上报（思路示例）：</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component<span class="token operator">&lt;</span>\n  React<span class="token punctuation">.</span>PropsWithChildren<span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> hasError<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span>\n<span class="token operator">&gt;</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> hasError<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>\n\n  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span> hasError<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    navigator<span class="token punctuation">.</span>sendBeacon<span class="token operator">?.</span><span class="token punctuation">(</span>\n      <span class="token string">&#39;/log&#39;</span><span class="token punctuation">,</span>\n      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&#39;react_error&#39;</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span> info <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">页面出现异常，请刷新或联系管理员</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="我的补充-manual" tabindex="-1"><a class="header-anchor" href="#我的补充-manual" aria-hidden="true">#</a> 我的补充（Manual）</h2><p>（不会被脚本覆盖）</p><h2 id="复盘与反思-learnings" tabindex="-1"><a class="header-anchor" href="#复盘与反思-learnings" aria-hidden="true">#</a> 复盘与反思（Learnings）</h2><ul><li>如果重做会怎么改？</li></ul><h2 id="面试官追问-面试官视角" tabindex="-1"><a class="header-anchor" href="#面试官追问-面试官视角" aria-hidden="true">#</a> 面试官追问（面试官视角）</h2><ul><li>[ ] 为什么选这个方案？替代方案为什么不选？</li><li>[!] 最大一次事故/踩坑是什么？如何定位与回滚？</li><li>[ ] 如果重做会怎么改？</li><li>[ ] 你如何保证“本地过/CI 不过”的问题不再发生？Node/TS 版本如何统一？</li><li>[ ] 你如何用规则把“模块化边界”写死？能否举一个禁止跨层引用的例子？</li></ul>',20),h={},b=(0,a(3744).Z)(h,[["render",function(n,s){const a=(0,e.up)("RouterLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[t,(0,e._)("ul",null,[(0,e._)("li",null,[p,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/tech__react.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[l])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/tech__typescript.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[o])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/tech__webpack.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[r])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/tech__performance.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[i])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/tech__eslint-engineering.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[c])),_:1})])])]),(0,e._)("li",null,[u,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/matrix__bundler-webpack-vite-rollup.html#%E5%AF%B9%E6%AF%94%E8%A1%A8%E6%A0%BC"},{default:(0,e.w5)((()=>[d])),_:1})])])])]),k],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);