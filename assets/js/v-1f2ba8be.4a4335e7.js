"use strict";(self.webpackChunkmd_vuepress=self.webpackChunkmd_vuepress||[]).push([[9745],{2592:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-1f2ba8be",path:"/interview-prep/tech__typescript.html",title:"TypeScript（类型安全与工程治理）",lang:"zh-CN",frontmatter:{id:"tech__typescript",type:"tech",title:"TypeScript（类型安全与工程治理）",mastery:"not_started",tags:["typescript","types","lint"],projects:["project__dji-rms","project__dji-user-center","project__dji-devops","project__xdr-dashboard-report"],source_refs:[{source:"resume",file:"docs/job-description/web前端开发工程师-彭聪.md",anchor:"TODO"}],seed_refs:[{source:"outline",file:"docs/job-description/web前端开发工程师-彭聪-面试技术大纲.md",anchor:"TODO"}],updated_at:"2025-12-20T00:00:00.000Z"},excerpt:"",headers:[{level:2,title:"摘要（Auto）",slug:"摘要-auto",children:[]},{level:2,title:"建议追问（Auto）",slug:"建议追问-auto",children:[]},{level:2,title:"在我项目中的角色与使用场景",slug:"在我项目中的角色与使用场景",children:[]},{level:2,title:"关联卡片",slug:"关联卡片",children:[]},{level:2,title:"在我项目中的角色与使用场景",slug:"在我项目中的角色与使用场景-1",children:[]},{level:2,title:"原理简述",slug:"原理简述",children:[]},{level:2,title:"对比表格",slug:"对比表格",children:[]},{level:2,title:"模拟问答",slug:"模拟问答",children:[]},{level:2,title:"手写代码区",slug:"手写代码区",children:[]},{level:2,title:"我的补充（Manual）",slug:"我的补充-manual",children:[]},{level:2,title:"复盘与反思（Learnings）",slug:"复盘与反思-learnings",children:[]},{level:2,title:"面试官追问（面试官视角）",slug:"面试官追问-面试官视角",children:[]}],git:{updatedTime:1769876936e3},filePathRelative:"interview-prep/tech__typescript.md"}},5601:(n,s,a)=>{a.r(s),a.d(s,{default:()=>d});var e=a(6252);const t=(0,e.uE)('<h2 id="摘要-auto" tabindex="-1"><a class="header-anchor" href="#摘要-auto" aria-hidden="true">#</a> 摘要（Auto）</h2><ul><li>生成时间：2025-12-20</li><li>简历中出现的项目标题（提取）：大疆用户中心重构 / 大疆售后 RMS 系统重构 / 跨平台公告插件系统 / 大疆 DevOps 平台维护 / XDR 系统 - 魔方大屏 + 报表</li><li>面试大纲关键词（提取 Top10）：1）大疆用户中心重构：性能优化 + HTTP 原理 + Webpack 架构 / 性能指标与方法论 / 简历可落地点（结合你的“优化四板斧”） / HTTP 常考点（从“为什么变快”倒推） / Webpack 架构（工程化面试常考） / 按优化顺序，把方案“串起来”（排查 → 定位 → 选择 → 验证） / 0. 排查与基线（先把问题“量化”） / 1. 先保“可见”——骨架屏预渲染（直接拉低 LCP） / 2. 再减“阻塞”——关键渲染路径（CRP）梳理：CSS/字体/首图优先级 / 3. 再降“下载与解析成本”——更小的包体与更少的无效代码</li></ul><h2 id="建议追问-auto" tabindex="-1"><a class="header-anchor" href="#建议追问-auto" aria-hidden="true">#</a> 建议追问（Auto）</h2><ul><li>你为什么在该项目/场景里选择这个方案？替代方案为何不选？</li><li>最大一次事故/踩坑是什么？如何定位与回滚？</li><li>如果重做：架构/边界/工程化会怎么调整？</li></ul><h2 id="在我项目中的角色与使用场景" tabindex="-1"><a class="header-anchor" href="#在我项目中的角色与使用场景" aria-hidden="true">#</a> 在我项目中的角色与使用场景</h2><h2 id="关联卡片" tabindex="-1"><a class="header-anchor" href="#关联卡片" aria-hidden="true">#</a> 关联卡片</h2>',6),p=(0,e.Uk)("项目： "),o=(0,e._)("code",null,"project__dji-rms",-1),l=(0,e._)("code",null,"project__dji-user-center",-1),c=(0,e._)("code",null,"project__dji-devops",-1),r=(0,e._)("code",null,"project__xdr-dashboard-report",-1),i=(0,e.uE)('<h2 id="在我项目中的角色与使用场景-1" tabindex="-1"><a class="header-anchor" href="#在我项目中的角色与使用场景-1" aria-hidden="true">#</a> 在我项目中的角色与使用场景</h2><ul><li>目标：在多人协作、快速迭代下，把“隐性错误”前置到编译期，降低线上事故与回归成本。</li><li>典型场景： <ul><li>表单/接口字段复杂：用类型表达“可选/互斥/依赖关系”，减少运行时分支与 if-else。</li><li>跨模块协作：用类型做“契约”（DTO/Domain Model），配合 lint/CI 门禁保证一致性。</li><li>可维护性治理：拆分类型层（api types / domain types / ui props），避免类型污染。</li></ul></li></ul><h2 id="原理简述" tabindex="-1"><a class="header-anchor" href="#原理简述" aria-hidden="true">#</a> 原理简述</h2><p>TypeScript = JavaScript + 类型系统 + 编译器（tsc）。</p><ul><li><strong>结构化类型（Structural Typing）</strong>：看“形状”而不是“名义”，这使得类型更易组合，但也需要警惕过宽类型。</li><li><strong>类型推断（Inference）</strong>：减少显式类型声明，让类型更贴近真实代码；但“边界处”要显式（函数入参/返回、公共 API）。</li><li><strong>联合与交叉</strong>： <ul><li>联合（<code>A | B</code>）表达“多态输入”，要配合<strong>类型收窄</strong>（type guard）。</li><li>交叉（<code>A &amp; B</code>）表达“能力叠加”，常用于 HOC/混入能力。</li></ul></li><li><strong>泛型（Generics）</strong>：让类型随输入变化（如 <code>Promise&lt;T&gt;</code>），避免 <code>any</code>。</li><li><strong>条件类型/映射类型</strong>：用于构建更强表达能力的工具类型（<code>Pick/Partial/ReturnType</code> 等）。</li></ul><p>工程化落地的关键点：</p><ul><li><strong>tsconfig 分层</strong>：<code>base</code>（通用）+ <code>app</code>（运行时）+ <code>node</code>（脚本/构建），减少互相影响。</li><li><strong>类型边界治理</strong>： <ul><li>入口（API 层）做校验（zod/io-ts/自研校验）把 unknown 变成 domain type。</li><li>业务层尽量不出现 <code>any</code>，必要时用 <code>unknown</code> + guard。</li></ul></li><li><strong>增量构建</strong>：<code>incremental</code>/<code>composite</code>（大仓/多包）提升 CI 与本地速度。</li></ul><h2 id="对比表格" tabindex="-1"><a class="header-anchor" href="#对比表格" aria-hidden="true">#</a> 对比表格</h2><table><thead><tr><th>维度</th><th>TypeScript</th><th>JSDoc + JS</th><th>Flow</th></tr></thead><tbody><tr><td>类型能力</td><td><strong>最强</strong>（生态最全）</td><td>弱（靠注释约束）</td><td>中（生态萎缩）</td></tr><tr><td>工程生态</td><td><strong>事实标准</strong>（tsserver/工具链）</td><td>依赖 IDE/规则</td><td>较少维护</td></tr><tr><td>迁移成本</td><td>中（可渐进）</td><td>低</td><td>中</td></tr><tr><td>风险点</td><td>心智/类型复杂度</td><td>约束不足，线上风险高</td><td>社区与招聘风险</td></tr></tbody></table><p>渐进迁移策略（我常用）：</p><ul><li>先从“边界模块”开始：接口层/工具层/公共组件。</li><li>开启 <code>noImplicitAny</code>、<code>strictNullChecks</code> 采用“先 warning 后 error”门禁。</li><li>关键路径引入运行时校验（避免“类型正确但数据脏”）。</li></ul><h2 id="模拟问答" tabindex="-1"><a class="header-anchor" href="#模拟问答" aria-hidden="true">#</a> 模拟问答</h2><ul><li>[ ] Q1：<code>any</code> 和 <code>unknown</code> 的区别？你为什么更偏向 <code>unknown</code>？ <ul><li><code>any</code>：关闭类型检查，风险是“污染链路”，错误扩散。</li><li><code>unknown</code>：要求你显式收窄（guard），让风险收敛在边界。</li></ul></li><li>[ ] Q2：如何实现一个类型安全的请求封装？ <ul><li>把 “请求参数/响应体/错误体” 都类型化：<code>request&lt;TRes, TReq&gt;()</code>。</li><li>在 API 层做 runtime 校验，把 <code>unknown</code> 变成 <code>TRes</code>（否则 TS 只能保证编译期）。</li></ul></li><li>[ ] Q3：<code>interface</code> vs <code>type</code> 你怎么选？ <ul><li><code>interface</code>：更适合对象结构与可声明合并（声明扩展）。</li><li><code>type</code>：更适合联合/交叉/条件类型表达。</li><li>团队规则：公共 API 层对象优先 <code>interface</code>，复杂组合优先 <code>type</code>。</li></ul></li><li>[ ] Q4：TS 性能变慢你怎么治理？ <ul><li>拆分 <code>tsconfig</code>、减少 <code>include</code> 范围、避免巨型类型体操、开启 <code>incremental</code>，对 monorepo 用 <code>project references</code>。</li></ul></li></ul><h2 id="手写代码区" tabindex="-1"><a class="header-anchor" href="#手写代码区" aria-hidden="true">#</a> 手写代码区</h2><p>一个最小的“类型安全请求封装”（强调边界与失败路径）：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ApiError</span> <span class="token operator">=</span> <span class="token punctuation">{</span> code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>\n  TRes<span class="token punctuation">,</span>\n  TReq <span class="token keyword">extends</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>\n<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> req<span class="token operator">?</span><span class="token operator">:</span> TReq<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>TRes<span class="token operator">&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    method<span class="token operator">:</span> req <span class="token operator">?</span> <span class="token string">&#39;POST&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>\n    headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    body<span class="token operator">:</span> req <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 失败路径：把错误体限制成已知结构，避免 throw any</span>\n    <span class="token keyword">const</span> err <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ApiError <span class="token operator">|</span> <span class="token keyword">null</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>err<span class="token operator">?.</span>message <span class="token operator">??</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 边界：这里仍是 unknown（真实项目建议加 zod 校验）</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> TRes\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="我的补充-manual" tabindex="-1"><a class="header-anchor" href="#我的补充-manual" aria-hidden="true">#</a> 我的补充（Manual）</h2><p>（不会被脚本覆盖：踩坑、细节、反例、排查路径）</p><h2 id="复盘与反思-learnings" tabindex="-1"><a class="header-anchor" href="#复盘与反思-learnings" aria-hidden="true">#</a> 复盘与反思（Learnings）</h2><ul><li>如果重做会怎么改？</li></ul><h2 id="面试官追问-面试官视角" tabindex="-1"><a class="header-anchor" href="#面试官追问-面试官视角" aria-hidden="true">#</a> 面试官追问（面试官视角）</h2><ul><li>[ ] 为什么选这个方案？替代方案为什么不选？</li><li>[!] 最大一次事故/踩坑是什么？如何定位与回滚？</li><li>[ ] 如果重做会怎么改？</li></ul>',22),u={},d=(0,a(3744).Z)(u,[["render",function(n,s){const a=(0,e.up)("RouterLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[t,(0,e._)("ul",null,[(0,e._)("li",null,[p,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/project__dji-rms.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[o])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/project__dji-user-center.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[l])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/project__dji-devops.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[c])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(a,{to:"/interview-prep/project__xdr-dashboard-report.html#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"},{default:(0,e.w5)((()=>[r])),_:1})])])])]),i],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);