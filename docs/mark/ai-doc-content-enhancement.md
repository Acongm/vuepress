---
title: AI 文档内容提炼增强
date: 2026-02-04
ai_generated: false
tags:
  - ai
  - mark
  - 工具优化
---

# AI 文档内容提炼增强

## 概述

为了解决 AI 提炼文档内容过于简短的问题，本次更新对 AI 文档生成系统进行了全面优化，使生成的技术文档更加详尽、实用和专业。

## 主要改进

### 1. 增强文档模板结构

原有模板结构简单，仅包含基本的核心要点和代码示例。新模板增加了多个必要章节：

#### 新增章节：

- **概述**：100-200 字的主题背景介绍
- **详细解析**：深入剖析技术原理和最佳实践
- **常见问题**：3-5 个 Q&A 格式的问题解答
- **扩展阅读**：相关资源和官方文档链接

#### 内容要求提升：

- 总字数从原来的 500-800 字提升到 **1500+ 字**（不含代码）
- 代码示例从 0-1 个提升到 **至少 3 个完整示例**
- 每个核心要点必须包含 **3-5 段详细说明**

### 2. 优化 AI 生成提示词

#### generateDocument 函数优化

在 `lib/glm-api.mjs` 中的文档生成函数增加了明确的内容要求：

```javascript
// 核心要求：
// 1. 内容要详尽丰富：不少于 1500 字（不含代码）
// 2. 深度解析：不仅说明"是什么"，还要说明"为什么"和"怎么用"
// 3. 实用性强：提供 3-5 个完整的代码示例
// 4. 注重细节和实用性
```

#### improveDocument 函数优化

文档优化功能同样得到增强：

- 大幅扩充内容，目标不少于 1500 字
- 为每个要点添加详细的背景说明和应用场景
- 深入解释"为什么"和"怎么做"
- 补充完整的代码示例，覆盖基础、进阶、实战场景
- 添加常见问题和解答（至少 3-5 个）

### 3. 提升 Token 配额

将 `maxTokens` 参数从 4000 提升到 **8000**，支持生成更长、更详细的内容。

## 使用示例

### 生成新文档

```bash
# 使用 GLM API 生成内容丰富的文档
export GLM_API_KEY="your-api-key"
node lib/glm-api.mjs generate "React Hooks 深入解析" \
  --model glm-4-plus \
  --max-tokens 8000 \
  --output /tmp/react-hooks.md
```

### 优化现有文档

```bash
# 使用 AI 优化并扩充文档内容
node lib/glm-api.mjs improve /tmp/my-doc.md \
  --output /tmp/my-doc-improved.md \
  --max-tokens 8000
```

### 完整工作流示例

```bash
# 1. 创建文档
node lib/glm-api.mjs generate "主题" --output /tmp/doc.md

# 2. （可选）优化文档
node lib/glm-api.mjs improve /tmp/doc.md --output /tmp/doc-final.md

# 3. 集成到知识库
node lib/ai-doc-integration.mjs /tmp/doc-final.md \
  --category react \
  --title "React Hooks 深入解析" \
  --model "GLM-4-Plus"
```

## 效果对比

### 之前（简短版本）

| 维度 | 效果 |
|-----|------|
| 内容长度 | 500-800 字 |
| 代码示例 | 0-1 个 |
| 结构层次 | 简单要点罗列 |
| 内容深度 | 表面描述 |
| 实用性 | 有限 |

### 现在（丰富版本）

| 维度 | 效果 |
|-----|------|
| 内容长度 | **1500+ 字** |
| 代码示例 | **3-5 个完整示例** |
| 结构层次 | 概述 + 要点 + 解析 + 示例 + 问答 + 扩展 |
| 内容深度 | 原理解析 + 实践指导 + 问题解答 |
| 实用性 | **高度实用** |

## 新文档结构示例

生成的文档将包含以下完整结构：

```markdown
---
title: 文档标题
date: YYYY-MM-DD
ai_generated: true
ai_model: AI模型
tags: [分类标签]
---

# 文档标题

> 原始问题：...

## 概述
（100-200字背景介绍）

## 核心要点
### 要点一：具体标题
（3-5段详细说明）

### 要点二：具体标题
（3-5段详细说明）

### 要点三：具体标题
（3-5段详细说明）

## 详细解析
- 底层原理
- 技术细节
- 优缺点分析
- 最佳实践

## 代码示例
### 示例 1: 基础用法
```javascript
// 完整代码 + 详细注释
```

### 示例 2: 进阶用法
```javascript
// 完整代码 + 详细注释
```

### 示例 3: 实战应用
```javascript
// 完整代码 + 详细注释
```

## 常见问题
### Q: 问题1
**A:** 详细解答

### Q: 问题2
**A:** 详细解答

## 扩展阅读
- 相关资源
- 官方文档
- 深入文章

## 参考
- 引用来源
```

## 注意事项

### API Token 消耗

由于生成更长的内容，每次调用会消耗更多的 tokens：

- **之前**：约 1000-2000 tokens
- **现在**：约 3000-6000 tokens

建议使用 `glm-4-plus` 或 `glm-4` 模型以获得更好的内容质量。

### 生成时间

内容生成时间会相应增加：

- **之前**：10-20 秒
- **现在**：30-60 秒

### 质量控制

建议生成后进行人工审核：

1. 检查内容准确性和相关性
2. 验证代码示例是否可运行
3. 确认技术细节是否正确
4. 补充或调整不够详细的部分

### 模型推荐

| 模型 | 速度 | 质量 | 推荐场景 |
|-----|------|------|---------|
| glm-4-flash | 最快 | 一般 | 快速原型、初稿 |
| glm-4-air | 快速 | 较好 | 日常使用 |
| glm-4 | 中等 | 好 | 标准文档 |
| glm-4-plus | 较慢 | 最好 | 重要文档、深度内容 |

## 配置要求

### 环境变量

```bash
# .env 文件或系统环境变量
export GLM_API_KEY="your-api-key-here"
```

### 可选调整

如果生成的内容仍然不够详细，可以进一步调整参数：

```bash
# 1. 增加 maxTokens
node lib/glm-api.mjs generate "主题" \
  --max-tokens 10000

# 2. 提供更多上下文
# 在代码中通过 additionalContext 参数传入

# 3. 使用更高级的模型
node lib/glm-api.mjs generate "主题" \
  --model glm-4-plus

# 4. 调整温度参数（更确定的输出）
node lib/glm-api.mjs generate "主题" \
  --temperature 0.5
```

## 相关文件

| 文件路径 | 说明 |
|---------|------|
| `.agents/skills/ai-doc/SKILL.md` | AI 文档工作流定义和模板 |
| `lib/glm-api.mjs` | GLM API 调用和文档生成函数 |
| `tools/ai-doc.mjs` | 文档整理辅助脚本 |
| `AI_DOC_ENHANCEMENT.md` | 详细的增强说明文档 |

## 总结

本次优化显著提升了 AI 文档生成的质量和实用性：

✅ **内容更丰富**：从 500-800 字提升到 1500+ 字  
✅ **结构更完整**：增加概述、解析、问答、扩展阅读等章节  
✅ **示例更充足**：从 0-1 个提升到 3-5 个完整代码示例  
✅ **深度更充分**：不仅说"是什么"，还说"为什么"和"怎么用"  
✅ **实用性更强**：包含最佳实践、常见问题、注意事项等实用内容

这些改进使得 AI 生成的文档更符合技术知识库的标准，为开发者提供更有价值的参考资料。

## 反馈与改进

如有任何问题或建议，欢迎提出：

- 内容质量不符合预期
- 需要进一步调整模板
- 特定领域的定制需求
- 性能优化建议

---

**更新时间**：2026-02-04  
**影响范围**：AI 文档生成系统  
**版本**：v2.0
