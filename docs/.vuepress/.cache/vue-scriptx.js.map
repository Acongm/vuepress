{
  "version": 3,
  "sources": ["dep:vue-scriptx", "../../../node_modules/vue-scriptx/dist/index.js", "../../../node_modules/vue-scriptx/dist/utils.js"],
  "sourcesContent": ["import d from \"../../../../node_modules/vue-scriptx/dist/index.js\";export default d;", "import { h } from 'vue';\r\nimport Utils from './utils';\r\nclass VueScriptX {\r\n    constructor() {\r\n        this.installed = false;\r\n        this.promise = Promise.resolve();\r\n        this.loaded = {};\r\n        this.props = ['unload', 'src', 'type', 'async', 'integrity', 'text', 'crossorigin'];\r\n    }\r\n    install(app) {\r\n        app.config.globalProperties.$scriptx = this;\r\n        let self = this;\r\n        if (self.installed)\r\n            return;\r\n        app.component('scriptx', {\r\n            props: self.props,\r\n            // Uses render method with <slot>s, see: https://v3.vuejs.org/guide/render-function.html\r\n            render() {\r\n                return h('div', { style: 'display:none' }, this.$slots.default ? this.$slots.default() : undefined);\r\n            },\r\n            mounted() {\r\n                let parent = this.$el.parentElement;\r\n                if (!this.src) {\r\n                    self.promise = self.promise\r\n                        .then(() => {\r\n                        let script = document.createElement('script');\r\n                        let el = this.$el.innerHTML;\r\n                        el = el.replace(/&lt;/gi, '<').replace(/&gt;/gi, '>').replace(/&amp;/gi, '&');\r\n                        script.type = 'text/javascript';\r\n                        script.appendChild(document.createTextNode(el));\r\n                        parent.appendChild(script);\r\n                        this.$emit('loaded'); // any other proper way to do this or emit error?\r\n                    });\r\n                }\r\n                else {\r\n                    let opts = Utils.omitBy(Utils.pick(this, self.props), Utils.isUndefined);\r\n                    opts.parent = parent;\r\n                    // this syntax results in an implicit return\r\n                    let load = () => {\r\n                        self.load(this.src, opts)\r\n                            .then(() => this.$emit('loaded'), (err) => this.$emit('error', err));\r\n                    };\r\n                    if (Utils.isUndefined(this.async) || this.async === 'false')\r\n                        self.promise = self.promise.then(load); // serialize execution\r\n                    else\r\n                        load(); // inject immediately\r\n                }\r\n                this.$nextTick(() => {\r\n                    this.$el.parentElement.removeChild(this.$el);\r\n                    // NOTE: this.$el.remove() may be used, but IE sucks, see: https://github.com/taoeffect/vue-script2/pull/17\r\n                });\r\n            },\r\n            unmounted() {\r\n                if (this.unload) {\r\n                    new Function(this.unload)(); // eslint-disable-line\r\n                    delete self.loaded[this.src];\r\n                }\r\n            }\r\n        });\r\n        self.installed = true;\r\n    }\r\n    load(src, opts = { parent: document.head }) {\r\n        if (!this.loaded[src]) {\r\n            this.loaded[src] = new Promise((resolve, reject) => {\r\n                let script = document.createElement('script');\r\n                // omit the special options that VueScriptX supports\r\n                Utils.defaults(script, Utils.omit(opts, ['unload', 'parent']), { type: 'text/javascript' });\r\n                // async may not be used with 'document.write'\r\n                script.async = false;\r\n                script.src = src;\r\n                // crossorigin in HTML and crossOrigin in the DOM per HTML spec\r\n                if (opts.crossorigin) {\r\n                    script.crossOrigin = opts.crossorigin;\r\n                }\r\n                // handle onload and onerror\r\n                script.onload = () => resolve(src);\r\n                script.onerror = () => reject(new Error(src));\r\n                opts.parent.appendChild(script);\r\n            });\r\n        }\r\n        return this.loaded[src];\r\n    }\r\n}\r\nexport default new VueScriptX();\r\n", "export default class {\r\n    static isUndefined(x) {\r\n        return x === undefined;\r\n    }\r\n    static pick(o, props) {\r\n        let x = {};\r\n        props.forEach(k => { x[k] = o[k]; });\r\n        return x;\r\n    }\r\n    static omit(o, props) {\r\n        let x = {};\r\n        Object.keys(o).forEach((k) => {\r\n            if (props.indexOf(k) === -1)\r\n                x[k] = o[k];\r\n        });\r\n        return x;\r\n    }\r\n    static omitBy(o, pred) {\r\n        let x = {};\r\n        Object.keys(o).forEach((k) => {\r\n            if (!pred(o[k]))\r\n                x[k] = o[k];\r\n        });\r\n        return x;\r\n    }\r\n    // custom defaults function suited to our specific purpose\r\n    static defaults(o, ...sources) {\r\n        sources.forEach((s) => {\r\n            Object.keys(s).forEach((k) => {\r\n                if (this.isUndefined(o[k]) || o[k] === '')\r\n                    o[k] = s[k];\r\n            });\r\n        });\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
