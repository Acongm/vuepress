# XDR 系统 - 魔方大屏 + 报表（2025.05-2025.12）- 面试技术大纲

> 技术栈：React + ECharts + NestJS + mongoose（简历）  
> 侧重点：低代码大屏内部原理、报表系统与 NestJS SSR（含导出/定时任务等可延展方向）

---

## 魔方大屏：低代码内部原理

### 核心架构（Schema 驱动）

- **物料体系**：组件元信息（props schema / 事件 schema / 默认值 / 版本治理）
- **渲染器**：schema → runtime tree；布局系统（栅格/自由布局/约束）
- **编辑器能力**：拖拽、吸附/对齐、缩放、撤销重做（命令模式）、多选/编组

### 数据与交互

- **数据源**：静态/接口/订阅；数据加工（transform）；刷新策略与容错
- **事件编排**：组件联动、全局变量、表达式引擎（安全沙箱/白名单）

### 工程化与稳定性

- **运行时性能**：高频刷新、局部更新、虚拟化、渲染降级与节流
- **兼容与升级**：schema 迁移、物料兼容、线上配置回滚与灰度

---

## 报表：NestJS 的 SSR 原理

### SSR 本质（Nest 视角）

- **渲染流程**：路由命中 → 拉取数据 → renderToString / stream → 返回 HTML
- **Hydration**：客户端接管、同构数据注水（dehydrate）、一致性与边界（时间/随机数/环境差异）
- **流式 SSR**：TTFB、chunk 传输、边渲染边发的收益与坑（错误处理/中断/缓存）

### 报表场景的 SSR 价值

- **价值点**：首屏/SEO、权限鉴权、直出可下载页面（配合导出 PDF/PPT/DOCS）
- **缓存策略**：页面级缓存、数据级缓存、按用户/按权限隔离缓存与失效机制

### 典型追问点

- **与 Next.js/Remix 的差别**：Nest 做 BFF + 自研 SSR 的成本/收益/边界
- **稳定性与降级**：渲染失败回退 CSR、超时控制、资源泄露与并发治理
